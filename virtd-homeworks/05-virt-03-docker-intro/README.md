## ЗАДАЧА 1

[Ссылка на custom-nginx в Docker Registry](https://hub.docker.com/repository/docker/dmitrypavlenko071082/custom-nginx/general)

## ЗАДАЧА 2

## Сценарии

Рассматриваются следующие типы систем:

1. Высоконагруженная база данных MySQL, критичная к отказу
2. Различные web-приложения
3. Windows-системы для бухгалтерии
4. Системы для высокопроизводительных расчетов на GPU

---

## Сценарий 1: Высоконагруженная MySQL-база данных, критичная к отказу

**Ключевые требования:**

- Максимальная производительность I/O
- Высокая отказоустойчивость
- Минимальные накладные расходы от виртуализации
- Соответствие требованиям безопасности и законодательства

**Рекомендуемая платформа:**  
**Физические серверы**

**Обоснование:**

- Нет виртуализационного overhead — прямой доступ к оборудованию
- Использование RAID, резервирование питания и сетей, репликация для отказоустойчивости
- Возможна виртуализация в роли "тёплого" резерва
- Предпочтительный выбор для критичных бизнес-приложений в крупных компаниях

---

## Сценарий 2: Web-приложения

**Ключевые требования:**

- Эффективная изоляция между сервисами
- Масштабируемость
- Удобство CI/CD, миграции и автоматизации
- Низкая стоимость инфраструктуры

**Рекомендуемая платформа:**  
**Виртуализация уровня ОС (контейнеризация)**  
_Примеры: Docker, LXC_

**Обоснование:**

- Контейнеры легковесны, быстро стартуют/останавливаются
- Отлично интегрируются с системами оркестрации (Kubernetes и пр.)
- Низкие накладные расходы — отсутствие полноценного гипервизора
- Высокая плотность размещения приложений
- Возможность строгой изоляции при необходимости (одно приложение — один контейнер, SELinux/AppArmor)

---

## Сценарий 3: Windows-системы для бухгалтерии

**Ключевые требования:**

- Поддержка Windows и графического интерфейса
- Изоляция рабочих мест
- Централизованное резервное копирование и управление
- Оптимизация лицензирования

**Рекомендуемая платформа:**  
**Паравиртуализация**  
_Примеры: KVM/QEMU, VMware ESXi, Hyper-V_

**Обоснование:**

- Удобное создание и управление изолированными Windows-машинами
- Возможность использовать шаблоны, снапшоты, клоны
- Простой доступ к UI-приложениям
- Контейнеры не подходят — Windows-контейнеризация ограничена и нестабильна на Linux-хостах
- При необходимости — поддержка VDI-решений

---

## Сценарий 4: Высокопроизводительные вычисления на GPU

**Ключевые требования:**

- Максимальный доступ к GPU (нативный)
- Низкий overhead
- Использование специализированных драйверов и библиотек
- Возможность распределения GPU между задачами

**Рекомендуемая платформа:**  
**Физические серверы**  
или  
**Виртуализация с поддержкой GPU passthrough**  
_Примеры: PCIe passthrough, SR-IOV, NVIDIA GRID_

**Обоснование:**

- Виртуализация часто снижает производительность, не подходит для задач DL/ML
- GPU passthrough позволяет разделять ресурсы, но требует квалификации
- Для сложных сценариев — кластеры из физических серверов + оркестратор (SLURM, Kubernetes с GPU)

---

## ЗАДАЧА 3

## Сценарий 1: 100 ВМ на базе Linux и Windows (преимущественно Windows-инфраструктура)

**Требования:**

- Поддержка большого количества виртуальных машин (100+)
- Преимущественно Windows-инфраструктура
- Балансировка нагрузки, репликация данных, автоматическое резервное копирование

**Рекомендуемая платформа:**  
**Microsoft Hyper-V**  
(альтернатива — **VMware vSphere**, если есть лицензии)

**Обоснование:**

- Глубокая интеграция с Windows-средой
- Поддержка репликации, бэкапов, балансировщиков на уровне платформы
- Масштабируется на сотни ВМ без потери управляемости
- Возможность использования шаблонов, снапшотов, клонов
- Централизованное управление через System Center или Windows Admin Center

> _Пример: есть инфраструктура с бухгалтерией, почтой и корпоративным сайтом на разных ВМ. Hyper-V позволяет всё это поддерживать в едином управляемом пространстве._

---

## Сценарий 2: Бесплатное open-source решение для 20–30 серверов на Linux и Windows

**Требования:**

- Бесплатность, открытый исходный код
- Поддержка Linux и Windows
- Умеренная производительность и масштабируемость

**Рекомендуемая платформа:**  
**KVM (Kernel-based Virtual Machine)**

**Обоснование:**

- Встроен в большинство дистрибутивов Linux
- Поддерживает запуск как Linux, так и Windows-гостевых машин
- Бесплатен и стабилен, активно развивается
- Совместим с инструментами управления: Virt-Manager, Cockpit, Proxmox и др.
- Идеален для малых и средних инсталляций

> _Пример: ставишь KVM на Linux-сервер и бесплатно разворачиваешь любые нужные ВМ с Windows и Linux._

---

## Сценарий 3: Бесплатная виртуализация для Windows-инфраструктуры

**Требования:**

- Максимальная совместимость с Windows
- Бесплатное решение
- Производительность и надежность

**Рекомендуемая платформа:**  
**Microsoft Hyper-V Server (бесплатная версия)**

**Обоснование:**

- Официальное решение от Microsoft — высокая совместимость
- Бесплатный Hyper-V Server доступен как отдельная ОС-гипервизор
- Поддерживает снапшоты, репликацию, шаблоны
- Можно построить полноценную Windows-инфраструктуру без затрат на гипервизор

> _Пример: разворачиваешь почтовый сервер, контроллер домена и веб-сервер на Hyper-V без покупки лицензий на виртуализацию._

---

## Сценарий 4: Тестирование ПО на разных дистрибутивах Linux

**Требования:**

- Быстрое создание/удаление ВМ с разными дистрибутивами
- Простое переключение между окружениями
- Минимальная настройка и ресурсоемкость

**Рекомендуемая платформа:**  
**VirtualBox** или **KVM** (с локальными или облачными образами)

**Обоснование:**

- VirtualBox — удобный, кроссплатформенный, с GUI и поддержкой большинства дистрибутивов
- KVM — более производительный и ближе к «промышленному» уровню
- Возможность легко создавать шаблоны, клоны, снапшоты
- Удобно для тестов, обучения, R&D

> _Пример: разработчик тестирует приложение на Ubuntu, CentOS и Debian в отдельных ВМ, переключаясь между ними по мере необходимости._

---

## ЗАДАЧА 4

Гетерогенная среда виртуализации — это когда в одной инфраструктуре используются разные гипервизоры, например: VMware, Hyper-V, KVM и другие. Такой подход может возникнуть по разным причинам (наследие, бизнес-требования, лицензии), но он несёт с собой ряд сложностей.

---

## Основные проблемы

### 1. Сложность управления

- Каждая платформа требует собственных инструментов администрирования.
- Специалистам приходится переключаться между разными интерфейсами и подходами.
- Повышается нагрузка на команду и увеличивается риск ошибок.

### 2. Проблемы автоматизации и мониторинга

- Нет единого инструмента, охватывающего все платформы.
- Требуются разные скрипты, системы бэкапа, решения для мониторинга.
- Реакция на инциденты замедляется из-за фрагментированности данных.

### 3. Рост стоимости обслуживания

- Понадобится расширенный штат с разнопрофильной экспертизой.
- Возникают затраты на обучение и сертификацию по каждой платформе.
- Может потребоваться лицензирование множества сторонних инструментов.

### 4. Совместимость и миграция данных

- Перемещение ВМ между платформами — технически сложно и рискованно.
- Потребуется конвертация форматов и дополнительная проверка конфигураций.
- Это ограничивает гибкость при масштабировании и реорганизации.

### 5. Увеличенные риски сбоев

- Отсутствие единого контроля над распределением ресурсов.
- Возможна перегрузка одних узлов при недозагрузке других.
- Ошибки управления в разрозненных системах могут привести к падению сервисов.

### 6. Проблемы безопасности

- У каждой платформы — свои механизмы безопасности.
- Перенос политик безопасности между платформами — нетривиален.
- Это повышает риск появления уязвимостей.

---

## Как минимизировать риски

### Внедрить единый уровень автоматизации и мониторинга

- Использовать мультивендорные платформы управления и оркестрации (например, Terraform, Ansible, Zabbix, Prometheus, Proxmox VE и др.).
- Объединить данные из разных платформ в общие панели мониторинга.

### Стандартизировать процессы

- Единые регламенты развертывания, бэкапа, обновлений и сопровождения ВМ.
- Документировать сценарии для всех платформ, где это возможно.

### Грамотно распределить роли и обучить персонал

- Обучить специалистов работе с несколькими системами.
- Либо назначить экспертов под каждую платформу.

### Использовать совместимые технологии миграции

- Инструменты для конвертации и переноса ВМ между платформами (например, `qemu-img`, `OVF`, `V2V`).
- Выбирать решения, поддерживающие импорт/экспорт между гипервизорами.

### Планировать инфраструктуру с учётом рисков

- Разделять критически важные и второстепенные сервисы.
- Избегать сложной взаимозависимости между ВМ на разных платформах.

---

## Личный подход к гетерогенной среде

> **Мой выбор — по возможности избегать гетерогенности.**

**Почему:**

- Проще управлять одной платформой — единые инструменты, привычный интерфейс.
- Меньше ошибок и выше отказоустойчивость.
- Проще настраивать автоматизацию.
- Меньше затраты на обучение и поддержку.

**Но:**  
Гетерогенные среды — это реальность. Исторические причины, бизнес-ограничения, лицензионная политика — всё это приводит к необходимости использовать разные платформы. Важно это принять и строить грамотную архитектуру, снижая сопутствующие риски.

---
